# Cyclotomic Exact Arithmetic

**Track:** C — TL Matrix Compilation
**Status:** Proposed
**Smaragda ID:** 01KHP7P6D1M8MN2P6C1YG922ZN
**Dependencies:** Demo 29 (TL_n matrices)
**Code path:** `knotapel/demo_36_cyclotomic_arithmetic/`

## Hypothesis

At A=e^{i*pi/4}, all TL_n generator matrix entries are elements of Z[i, sqrt(2)] — the ring generated by i=sqrt(-1) and sqrt(2). Each number represented as a + bi + c*sqrt(2) + di*sqrt(2) (four integer coordinates). All arithmetic becomes exact integer arithmetic with zero floating-point error. The bracket at delta=0 lives in a discrete, exact arithmetic domain.

Key values: A = e^{i*pi/4} = (1+i)/sqrt(2), A^{-1} = (1-i)/sqrt(2), A^2 = i, A^{-2} = -i, A^4 = -1.

## Predictions

1. All bracket computations at delta=0 are expressible in exact integer arithmetic (possibly with sqrt(2) factors).
2. Boolean gate thresholds become exact comparisons, removing floating-point dependence.
3. Matrix multiplication stays within the ring Z[i, sqrt(2)] (algebraic closure).
4. Results that should be real integers come out as exact integers with zero imaginary/irrational part.
5. Cyclotomic exact arithmetic is 4x integer operations per multiplication but eliminates ALL rounding — strictly more reliable for long computations where floating-point error accumulates.

## Approach

- **Part A:** Cyclotomic number type — C89 struct with four integers (a,b,c,d) representing a + bi + c*sqrt(2) + di*sqrt(2). Implement add, sub, mul (using (sqrt(2))^2=2, i^2=-1, (i*sqrt(2))^2=-2).
- **Part B:** Magnitude computation — |z|^2 = z * conj(z) where conj negates b and d. Work out exact formula.
- **Part C:** Generator matrices over Z[i, sqrt(2)] — rewrite TL_n generators with cyclotomic entries. Verify multiplication stays in ring.
- **Part D:** Bracket computation — compute brackets of all demo 19-24 braid words using exact cyclotomic arithmetic. Verify exact integer results.
- **Part E:** Exact thresholding — compare |bracket| to threshold using exact Q(sqrt(2)) comparison.
- **Part F:** Performance comparison — speed of cyclotomic vs floating-point for same computations.

## Connection to Demo 29 (Forward DKC)

Demo 29 already implemented exact Z[zeta_8] arithmetic with `cyc8_mul` using 16 integer multiplications. This demo would bring that same approach to the TL matrix compilation track. The Z[i, sqrt(2)] = Z[zeta_8] ring is the same — just different basis presentation.

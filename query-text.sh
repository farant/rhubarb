#!/usr/bin/env bash

echo reading "$1"

head -50 "$1" | claude -p "this is a text from project gutenberg. i am trying to figure out the title and the author. i also want to figure out best effort year it was originally published (not necessarily year published to gutenberg). so it would be a question of you recognizing the work and yourself knowing the year. i know multiple years can be valid for editions, translations, etc. the use case will be a sort of historical timeline of works so i think the goal is whatever year seems most historically accurate and educational for the text if there is ambiguity. for example if it is just a translation of a work of st augustine without commentary you might choose the year he wrote it, but if it is a work you know has substantial commentary you might choose the year the annotated work was published. so with that can you emit a structure format with 'Title', 'Author' and 'Year' fields? if it is clear there are multiple authors you can do various or comma separated names. i would also love to have a 'Tags' field that can include an array of items, one would be 'fiction', 'non-fiction', 'historical-document', etc. another would be 'appropriate-for-children'. another could be 'catholic' if the work is written by a catholic author and would be considered likely to have a nihil obstat or imprimatur (ie not just random fiction by an author who may have been catholic). i would also like a 'Summary' that explains, based on your knoweldge, a little background on the work, what it's about, etc. Let's also include a 'Notes' field where you can optionally add any notes if you want about context for the year you chose, etc. Can you have the structured output with fields be a toml format inside of an <result> tag?"

